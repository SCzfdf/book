# 运行时数据区

[Java 虚拟机的结构](https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-2.html)

JVM定义了在程序执行期间使用的各种运行时数据区域.

其中一些数据区域(方法区, 堆)是在JVM创建时创建, 只有在JVM推出时才会被销毁. 

其他数据区域(Java虚拟机栈, PC Registers, 本地方法栈)在线程创建时创建, 线程退出时销毁

​		

换句话说就是**方法区和堆**随着进程创建而创建. 随着进程销毁而销毁. 并且方法区和堆会被所有线程的共享会存在线程安全问题.

**Java虚拟机栈, PC Registers, 本地方法栈**, 随着线程创建而创建, 随着进程销毁而销毁. 只会被当前线程访问. 不存在线程安全问题

​		

运行时方法区可以分为以下5个部分:

1. **方法区**
2. **堆**
3. **Java虚拟机栈**
4. **PC Registers**
5. **本地方法栈**

![HotSpot架构图](%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.assets/Slide1.png)

## 方法区

**存储的是每个类的结构信息**. 包括运行时常量池, 字段和方法数据, 以及方法和构造函数的代码, 包括类和接口初始化以及实例初始化中使用的特殊方法